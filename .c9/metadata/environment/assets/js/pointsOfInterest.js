{"filter":false,"title":"pointsOfInterest.js","tooltip":"/assets/js/pointsOfInterest.js","undoManager":{"mark":48,"position":48,"stack":[[{"start":{"row":0,"column":0},"end":{"row":310,"column":0},"action":"insert","lines":["// This example uses the autocomplete feature of the Google Places API.","// It allows the user to find all hotels in a given place, within a given","// country. It then displays markers for all the hotels returned,","// with on-click details for each hotel.","","// This example requires the Places library. Include the libraries=places","// parameter when you first load the API. For example:","// <script src=\"https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places\">","","var map, places, infoWindow;","var markers = [];","var autocomplete;","var countryRestrict = {'country': 'ie'};","var MARKER_PATH = 'https://developers.google.com/maps/documentation/javascript/images/marker_green';","var hostnameRegexp = new RegExp('^https?://.+?/');","","var countries = {","  'ie': {","    center: {lat: 53.425, lng: -7.943},","    zoom: 6.65,","    types: ['cafe']","  }","};","","var category = {","'acc': {","bounds: map.getBounds(),","types: ['lodging']","\t}, ","'caf': {","bounds: map.getBounds(),","types: ['cafe']","\t},","  'int': {","bounds: map.getBounds(),","types: ['point_of_interest']","\t}, ","'nat': {","bounds: map.getBounds(),","types: ['natural_features']","\t},","  'par': {","bounds: map.getBounds(),","types: ['park']","\t},","'pub': {","bounds: map.getBounds(),","types: ['bar']","\t}, ","'res': {","bounds: map.getBounds(),","types: ['restaurant']","\t}","};","","function initMap() {","  map = new google.maps.Map(document.getElementById('map'), {","    zoom: countries['ie'].zoom,","    center: countries['ie'].center,","    mapTypeControl: false,","    panControl: false,","    zoomControl: false,","    streetViewControl: false","  });","","  infoWindow = new google.maps.InfoWindow({","    content: document.getElementById('info-content')","  });","","  // Create the autocomplete object and associate it with the UI input control.","  // Restrict the search to the default country, and to place type \"cities\".","  autocomplete = new google.maps.places.Autocomplete(","      /** @type {!HTMLInputElement} */ (","          document.getElementById('autocomplete')), {","        types: ['(cities)'],","        componentRestrictions: countryRestrict","      });","  places = new google.maps.places.PlacesService(map);","","  autocomplete.addListener('place_changed', onPlaceChanged);","","  // Add a DOM event listener to react when the user selects a country.","  document.getElementById('country').addEventListener(","      'change', setAutocompleteCountry);","}","","// When the user selects a city, get the place details for the city and","// zoom the map in on the city.","function onPlaceChanged() {","  var place = autocomplete.getPlace();","  if (place.geometry) {","    map.panTo(place.geometry.location);","    map.setZoom(12);","    search();","  } else {","    document.getElementById('autocomplete').placeholder = 'Enter a town or city';","  }","}","","// Search for hotels in the selected city, within the viewport of the map.","function search() {","  var hotelSearch = {","    bounds: map.getBounds(),","    types: ['lodging']","  };","  ","  //var poiSearch = {"," // bounds: map.getBounds(),"," // types: ['point_of_interest']"," // };","","  places.nearbySearch(hotelSearch, function(results, status) {","    if (status === google.maps.places.PlacesServiceStatus.OK) {","      clearResults();","      clearMarkers();","      // Create a marker for each hotel found, and","      // assign a letter of the alphabetic to each marker icon.","      for (var i = 0; i < results.length; i++) {","        var markerLetter = String.fromCharCode('A'.charCodeAt(0) + (i % 26));","        var markerIcon = MARKER_PATH + markerLetter + '.png';","        // Use marker animation to drop the icons incrementally on the map.","        markers[i] = new google.maps.Marker({","          position: results[i].geometry.location,","          animation: google.maps.Animation.DROP,","          icon: markerIcon","        });","        // If the user clicks a hotel marker, show the details of that hotel","        // in an info window.","        markers[i].placeResult = results[i];","        google.maps.event.addListener(markers[i], 'click', showInfoWindow);","        setTimeout(dropMarker(i), i * 100);","        addResult(results[i], i);","      }","    }","  });","  /*places.nearbySearch(poiSearch, function(results, status) {","    if (status === google.maps.places.PlacesServiceStatus.OK) {","      clearResults();","      clearMarkers();","      // Create a marker for each p.o.i found, and","      // assign a number to each marker icon.","      for (var i = 0; i < results.length; i++) {","        var markerLetter = String.fromCharCode('1'.charCodeAt(0) + (i % 26));","        var markerIcon = MARKER_PATH + markerLetter + '.png';","        // Use marker animation to drop the icons incrementally on the map.","        markers[i] = new google.maps.Marker({","          position: results[i].geometry.location,","          animation: google.maps.Animation.DROP,","          icon: markerIcon","        });","        ","      }","    }","  });*/","}","","function clearMarkers() {","  for (var i = 0; i < markers.length; i++) {","    if (markers[i]) {","      markers[i].setMap(null);","    }","  }","  markers = [];","}","","// Set the country restriction based on user input.","// Also center and zoom the map on the given country.","function setAutocompleteCountry() {","  var categories = document.getElementById('category').value;","  if (category == 'all') {","    autocomplete.setComponentRestrictions({'category': []});","    map.setCenter({lat: 13, lng: 0});","    map.setZoom(2);","  } else {","    autocomplete.setComponentRestrictions({'categories': category});","    map.setCenter(categories[category].center);","    map.setZoom(categories[category].zoom);","  }","  clearResults();","  clearMarkers();","}","","function dropMarker(i) {","  return function() {","    markers[i].setMap(map);","  };","}","","function addResult(result, i) {","  var results = document.getElementById('localHotels');","  var markerLetter = String.fromCharCode('A'.charCodeAt(0) + (i % 26));","  var markerIcon = MARKER_PATH + markerLetter + '.png';","","  var tr = document.createElement('tr');","  tr.style.backgroundColor = (i % 2 === 0 ? '#F0F0F0' : '#FFFFFF');","  tr.onclick = function() {","    google.maps.event.trigger(markers[i], 'click');","  };","","  var iconTd = document.createElement('td');","  var nameTd = document.createElement('td');","  var icon = document.createElement('img');","  icon.src = markerIcon;","  icon.setAttribute('class', 'placeIcon');","  icon.setAttribute('className', 'placeIcon');","  var name = document.createTextNode(result.name);","  iconTd.appendChild(icon);","  nameTd.appendChild(name);","  tr.appendChild(iconTd);","  tr.appendChild(nameTd);","  results.appendChild(tr);","}","","/*function addPointOfInterest(result, i) {","  var results = document.getElementById('pointsOfInterest');","  var markerLetter = String.fromCharCode('A'.charCodeAt(0) + (i % 26));","  var markerIcon = MARKER_PATH + markerLetter + '.png';","","  var tr = document.createElement('tr');","  tr.style.backgroundColor = (i % 2 === 0 ? '#F0F0F0' : '#FFFFFF');","  tr.onclick = function() {","    google.maps.event.trigger(markers[i], 'click');","  };","","  var iconTd = document.createElement('td');","  var nameTd = document.createElement('td');","  var icon = document.createElement('img');","  icon.src = markerIcon;","  icon.setAttribute('class', 'placeIcon');","  icon.setAttribute('className', 'placeIcon');","  var name = document.createTextNode(result.name);","  iconTd.appendChild(icon);","  nameTd.appendChild(name);","  tr.appendChild(iconTd);","  tr.appendChild(nameTd);","  results.appendChild(tr);","}*/","","function clearResults() {","  var results = document.getElementById('results');","  while (results.childNodes[0]) {","    results.removeChild(results.childNodes[0]);","  }","}","","// Get the place details for a hotel. Show the information in an info window,","// anchored on the marker for the hotel that the user selected.","function showInfoWindow() {","  var marker = this;","  places.getDetails({placeId: marker.placeResult.place_id},","      function(place, status) {","        if (status !== google.maps.places.PlacesServiceStatus.OK) {","          return;","        }","        infoWindow.open(map, marker);","        buildIWContent(place);","      });","}","","// Load the place information into the HTML elements used by the info window.","function buildIWContent(place) {","  document.getElementById('iw-icon').innerHTML = '<img class=\"hotelIcon\" ' +","      'src=\"' + place.icon + '\"/>';","  document.getElementById('iw-url').innerHTML = '<b><a href=\"' + place.url +","      '\">' + place.name + '</a></b>';","  document.getElementById('iw-address').textContent = place.vicinity;","","  if (place.formatted_phone_number) {","    document.getElementById('iw-phone-row').style.display = '';","    document.getElementById('iw-phone').textContent =","        place.formatted_phone_number;","  } else {","    document.getElementById('iw-phone-row').style.display = 'none';","  }","","  // Assign a five-star rating to the hotel, using a black star ('&#10029;')","  // to indicate the rating the hotel has earned, and a white star ('&#10025;')","  // for the rating points not achieved.","  if (place.rating) {","    var ratingHtml = '';","    for (var i = 0; i < 5; i++) {","      if (place.rating < (i + 0.5)) {","        ratingHtml += '&#10025;';","      } else {","        ratingHtml += '&#10029;';","      }","    document.getElementById('iw-rating-row').style.display = '';","    document.getElementById('iw-rating').innerHTML = ratingHtml;","    }","  } else {","    document.getElementById('iw-rating-row').style.display = 'none';","  }","","  // The regexp isolates the first part of the URL (domain plus subdomain)","  // to give a short URL for displaying in the info window.","  if (place.website) {","    var fullUrl = place.website;","    var website = hostnameRegexp.exec(place.website);","    if (website === null) {","      website = 'http://' + place.website + '/';","      fullUrl = website;","    }","    document.getElementById('iw-website-row').style.display = '';","    document.getElementById('iw-website').textContent = website;","  } else {","    document.getElementById('iw-website-row').style.display = 'none';","  }","}","","/*---------------------------*/",""],"id":1}],[{"start":{"row":103,"column":13},"end":{"row":103,"column":20},"action":"remove","lines":["lodging"],"id":2},{"start":{"row":103,"column":13},"end":{"row":103,"column":30},"action":"insert","lines":["point_of_interest"]}],[{"start":{"row":101,"column":6},"end":{"row":101,"column":11},"action":"remove","lines":["hotel"],"id":3},{"start":{"row":101,"column":6},"end":{"row":101,"column":9},"action":"insert","lines":["poi"]}],[{"start":{"row":111,"column":22},"end":{"row":111,"column":27},"action":"remove","lines":["hotel"],"id":4},{"start":{"row":111,"column":22},"end":{"row":111,"column":23},"action":"insert","lines":["p"]},{"start":{"row":111,"column":23},"end":{"row":111,"column":24},"action":"insert","lines":["o"]},{"start":{"row":111,"column":24},"end":{"row":111,"column":25},"action":"insert","lines":["i"]}],[{"start":{"row":115,"column":34},"end":{"row":115,"column":39},"action":"remove","lines":["hotel"],"id":5},{"start":{"row":115,"column":34},"end":{"row":115,"column":35},"action":"insert","lines":["p"]},{"start":{"row":115,"column":35},"end":{"row":115,"column":36},"action":"insert","lines":["."]},{"start":{"row":115,"column":36},"end":{"row":115,"column":37},"action":"insert","lines":["o"]},{"start":{"row":115,"column":37},"end":{"row":115,"column":38},"action":"insert","lines":["."]},{"start":{"row":115,"column":38},"end":{"row":115,"column":39},"action":"insert","lines":["i"]}],[{"start":{"row":118,"column":48},"end":{"row":118,"column":49},"action":"remove","lines":["A"],"id":6},{"start":{"row":118,"column":48},"end":{"row":118,"column":49},"action":"insert","lines":["a"]}],[{"start":{"row":130,"column":38},"end":{"row":130,"column":39},"action":"remove","lines":["1"],"id":7}],[{"start":{"row":130,"column":38},"end":{"row":130,"column":39},"action":"insert","lines":["3"],"id":8}],[{"start":{"row":135,"column":2},"end":{"row":153,"column":7},"action":"remove","lines":["/*places.nearbySearch(poiSearch, function(results, status) {","    if (status === google.maps.places.PlacesServiceStatus.OK) {","      clearResults();","      clearMarkers();","      // Create a marker for each p.o.i found, and","      // assign a number to each marker icon.","      for (var i = 0; i < results.length; i++) {","        var markerLetter = String.fromCharCode('1'.charCodeAt(0) + (i % 26));","        var markerIcon = MARKER_PATH + markerLetter + '.png';","        // Use marker animation to drop the icons incrementally on the map.","        markers[i] = new google.maps.Marker({","          position: results[i].geometry.location,","          animation: google.maps.Animation.DROP,","          icon: markerIcon","        });","        ","      }","    }","  });*/"]}],[{"start":{"row":171,"column":41},"end":{"row":171,"column":52},"action":"remove","lines":["localHotels"],"id":10},{"start":{"row":171,"column":41},"end":{"row":171,"column":57},"action":"insert","lines":["pointsOfInterest"]}],[{"start":{"row":172,"column":42},"end":{"row":172,"column":43},"action":"remove","lines":["A"],"id":11}],[{"start":{"row":172,"column":42},"end":{"row":172,"column":43},"action":"insert","lines":["a"],"id":12}],[{"start":{"row":175,"column":7},"end":{"row":175,"column":8},"action":"remove","lines":["r"],"id":13},{"start":{"row":175,"column":7},"end":{"row":175,"column":8},"action":"insert","lines":["d"]}],[{"start":{"row":175,"column":36},"end":{"row":175,"column":37},"action":"remove","lines":["r"],"id":14}],[{"start":{"row":175,"column":36},"end":{"row":175,"column":37},"action":"insert","lines":["d"],"id":15}],[{"start":{"row":176,"column":3},"end":{"row":176,"column":4},"action":"remove","lines":["r"],"id":16}],[{"start":{"row":176,"column":3},"end":{"row":176,"column":4},"action":"insert","lines":["d"],"id":17}],[{"start":{"row":177,"column":3},"end":{"row":177,"column":4},"action":"remove","lines":["r"],"id":18}],[{"start":{"row":177,"column":3},"end":{"row":177,"column":4},"action":"insert","lines":["d"],"id":19}],[{"start":{"row":181,"column":40},"end":{"row":181,"column":41},"action":"remove","lines":["d"],"id":20}],[{"start":{"row":181,"column":40},"end":{"row":181,"column":41},"action":"insert","lines":["r"],"id":21}],[{"start":{"row":182,"column":40},"end":{"row":182,"column":41},"action":"remove","lines":["d"],"id":22}],[{"start":{"row":182,"column":40},"end":{"row":182,"column":41},"action":"insert","lines":["r"],"id":23}],[{"start":{"row":190,"column":3},"end":{"row":190,"column":4},"action":"remove","lines":["r"],"id":24}],[{"start":{"row":190,"column":3},"end":{"row":190,"column":4},"action":"insert","lines":["d"],"id":25}],[{"start":{"row":191,"column":3},"end":{"row":191,"column":4},"action":"remove","lines":["r"],"id":26}],[{"start":{"row":191,"column":3},"end":{"row":191,"column":4},"action":"insert","lines":["d"],"id":27}],[{"start":{"row":190,"column":22},"end":{"row":190,"column":23},"action":"remove","lines":["d"],"id":28}],[{"start":{"row":190,"column":22},"end":{"row":190,"column":23},"action":"insert","lines":["r"],"id":29}],[{"start":{"row":191,"column":22},"end":{"row":191,"column":23},"action":"remove","lines":["d"],"id":30}],[{"start":{"row":191,"column":22},"end":{"row":191,"column":23},"action":"insert","lines":["r"],"id":31}],[{"start":{"row":192,"column":23},"end":{"row":192,"column":24},"action":"remove","lines":["r"],"id":32}],[{"start":{"row":192,"column":23},"end":{"row":192,"column":24},"action":"insert","lines":["d"],"id":33}],[{"start":{"row":190,"column":22},"end":{"row":190,"column":23},"action":"remove","lines":["r"],"id":34}],[{"start":{"row":190,"column":22},"end":{"row":190,"column":23},"action":"insert","lines":["d"],"id":35}],[{"start":{"row":191,"column":22},"end":{"row":191,"column":23},"action":"remove","lines":["r"],"id":36}],[{"start":{"row":191,"column":22},"end":{"row":191,"column":23},"action":"insert","lines":["d"],"id":37}],[{"start":{"row":190,"column":22},"end":{"row":190,"column":23},"action":"remove","lines":["d"],"id":38}],[{"start":{"row":190,"column":22},"end":{"row":190,"column":23},"action":"insert","lines":["r"],"id":39}],[{"start":{"row":191,"column":22},"end":{"row":191,"column":23},"action":"remove","lines":["d"],"id":40}],[{"start":{"row":191,"column":22},"end":{"row":191,"column":23},"action":"insert","lines":["r"],"id":41}],[{"start":{"row":181,"column":11},"end":{"row":181,"column":12},"action":"remove","lines":["d"],"id":42}],[{"start":{"row":181,"column":11},"end":{"row":181,"column":12},"action":"insert","lines":["r"],"id":43}],[{"start":{"row":182,"column":11},"end":{"row":182,"column":12},"action":"remove","lines":["d"],"id":44}],[{"start":{"row":182,"column":11},"end":{"row":182,"column":12},"action":"insert","lines":["r"],"id":45}],[{"start":{"row":188,"column":7},"end":{"row":188,"column":8},"action":"remove","lines":["d"],"id":46}],[{"start":{"row":188,"column":7},"end":{"row":188,"column":8},"action":"insert","lines":["r"],"id":47}],[{"start":{"row":189,"column":7},"end":{"row":189,"column":8},"action":"remove","lines":["d"],"id":48}],[{"start":{"row":189,"column":7},"end":{"row":189,"column":8},"action":"insert","lines":["r"],"id":49}]]},"ace":{"folds":[],"scrolltop":2580,"scrollleft":0,"selection":{"start":{"row":189,"column":8},"end":{"row":189,"column":8},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":294,"mode":"ace/mode/javascript"}},"timestamp":1562271302037,"hash":"de5a8183df4187ea7d30cf3eb6dabf2d3550bf51"}